# --------------------------------------------------------
# Scorer Network Configuration
# Copyright (c) 2025
# --------------------------------------------------------

SOLVER:
  run: train
  gpu: (3,)
  type: adam              # 使用Adam优化器
  lr: 0.001               # 学习率
  weight_decay: 0.0001    # 权重衰减
  best_val: min:test/mae  # 最优模型选择指标（最小化MAE）
  
  logdir: logs/scorer_deepmill/baseline
  max_epoch: 600
  test_every_epoch: 10
  
  milestones: (240, 360, 480)
  ckpt_num: 20
  
  # 进度条显示
  progress_bar: True

DATA:
  train:
    name: shapenet
    
    # octree building
    depth: 5
    full_depth: 2
    
    # transformation
    orient_normal: xyz
    
    # data augmentation
    distort: True
    angle: (0, 5, 0)       # y轴旋转 ±5度
    interval: (1, 1, 1)
    scale: 0.25            # 缩放范围
    jitter: 0.25           # 抖动范围
    uniform: True          # 均匀缩放
    flip: (0, 0, 0)        # 不翻转
    
    # loading
    location: data_2.0/points
    filelist: data_2.0/filelist/models_train_val.txt
    batch_size: 8
    shuffle: True
    num_workers: 0
    pin_memory: True
    disable: False
  
  test:
    name: shapenet
    
    # octree building
    depth: 5
    full_depth: 2
    
    # transformation
    orient_normal: xyz
    
    # no augmentation for test
    distort: False
    angle: (0, 0, 0)
    interval: (1, 1, 1)
    scale: 0.0
    jitter: 0.0
    uniform: True
    flip: (0, 0, 0)
    
    # loading
    location: data_2.0/points
    filelist: data_2.0/filelist/models_test.txt
    batch_size: 1
    shuffle: False
    num_workers: 0
    pin_memory: True
    disable: False

MODEL:
  feature: ND            # Normal + Depth
  interp: 'linear'
  channel: 4
  nempty: False
  
  # Scorer-specific parameters
  geo_channels: 256      # 几何特征维度
  rot_channels: 128      # 旋转特征维度
  tool_channels: 64      # 刀具特征维度

LOSS:
  type: mse              # 或 'huber'
  huber_delta: 1.0       # Huber loss的delta参数（如果使用huber）

